(function(){function S(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function h(i,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},h(i,t)}function p(i){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(i)}function k(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function I(i){return I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(i)}function M(i,t){if(t&&(I(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i)}function w(){return w=k()?Reflect.construct.bind():function(i,t,e){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(i,r));return e&&h(o,e.prototype),o},w.apply(null,arguments)}function L(i){var t=typeof Map=="function"?new Map:void 0;return L=function(e){function r(){return w(e,arguments,p(this).constructor)}if(e===null||(o=e,Function.toString.call(o).indexOf("[native code]")===-1))return e;var o;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(e))return t.get(e);t.set(e,r)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,e)},L(i)}function P(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function E(i,t){return function(e){if(Array.isArray(e))return e}(i)||function(e,r){var o=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(o!=null){var l,c,u=[],n=!0,a=!1;try{for(o=o.call(e);!(n=(l=o.next()).done)&&(u.push(l.value),!r||u.length!==r);n=!0);}catch(s){a=!0,c=s}finally{try{n||o.return==null||o.return()}finally{if(a)throw c}}return u}}(i,t)||function(e,r){if(e){if(typeof e=="string")return P(e,r);var o=Object.prototype.toString.call(e).slice(8,-1);return o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set"?Array.from(e):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?P(e,r):void 0}}(i,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var d,R=/^(http(s)?):\/\//,y=function(i){if(!function(n){return R.test(n)}(i))return null;var t;try{t=new URL(i)}catch{(t=document.createElement("a")).href=i}var e=t.protocol,r=t.host,o=t.pathname,l=t.hash,c=/:80$/,u=/:443$/;return e==="http:"&&c.test(r)?r=r.replace(c,""):e==="https:"&&u.test(r)&&(r=r.replace(u,"")),{host:r,protocol:e,origin:"".concat(e,"//").concat(r),pathname:o,hash:l}},F=function(i){var t=y(i);return t?t.origin:null},O=y("https://payments.stripe.com"),C=(O&&O.origin,function(i,t){var e=y(i),r=y(t);return!(!e||!r)&&e.origin===r.origin}),x=function(i){return C(i,"https://js.stripe.com/v3/")},z="buy-button-app-dd12309fc720b3a175f4648dcfcd1c5e6c26c092.html",j="https://js.stripe.com/v3/",A=(d=[],{addEventListener:function(i,t,e,r){i.addEventListener(t,e,r),d.push([i,t,e,r])},removeEventListener:function(i,t,e,r){i.removeEventListener(t,e,r),d=d.filter(function(o){return function(l,c){var u=E(l,4),n=u[0],a=u[1],s=u[2],f=u[3],m=E(c,4),B=m[0],U=m[1],K=m[2],g=m[3];return B!==n||U!==a||K!==s||(typeof f=="object"&&f?f.capture:f)===!0!=((typeof g=="object"&&g?g.capture:g)===!0)}([i,t,e,r],o)})}}),b=A.addEventListener,v=A.removeEventListener,_=document.location.href,T=function(i){function t(){var n;return(n=u.call(this)).uniqueId=null,n.frame=n.createIframeElement(),n.attachShadowDom(),n}(function(n,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),a&&h(n,a)})(t,i);var e,r,o,l,c,u=(e=t,r=k(),function(){var n,a=p(e);if(r){var s=p(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return M(this,n)});return o=t,c=[{key:"observedAttributes",get:function(){return["client-reference-id","buy-button-id","publishable-key","__locale-override","customer-email","customer-session-client-secret"]}}],(l=[{key:"connectedCallback",value:function(){this.buyButtonId=this.getAttribute("buy-button-id")||void 0,this.publishableApiKey=this.getAttribute("publishable-key")||void 0,this.clientReferenceId=this.getAttribute("client-reference-id")||void 0,this.customerEmail=this.getAttribute("customer-email")||void 0,this.__localeOverride=this.getAttribute("__locale-override")||void 0,this.uniqueId=this.createUniqueId(),this.setIframeSrc(),this.addFrameLoadListener(),this.addPostMessageListener(),this.addPageShowListener()}},{key:"disconnectedCallback",value:function(){this.removeFrameLoadListener(),this.removePostMessageListener(),this.removePageShowListener()}},{key:"createUniqueId",value:function(){return Math.random().toString(16).slice(2)}},{key:"setIframeSrc",value:function(){var n=this.customerEmail?encodeURIComponent(this.customerEmail):void 0,a="#buyButtonId=".concat(this.buyButtonId,"&publishableApiKey=").concat(this.publishableApiKey,"&uuid=").concat(this.uniqueId,"&lo=").concat(this.__localeOverride,"&customerEmail=").concat(n),s="";s="".concat(j).concat(z).concat(a),this.frame.src=s}},{key:"frameLoadListenerFunc",value:function(){this.messageAttributesToIframe()}},{key:"messageAttributesToIframe",value:function(){this.clientReferenceId&&this.messageIframe({event:"buy-button-client-reference-id",data:{clientReferenceId:this.clientReferenceId}}),this.customerEmail&&this.messageIframe({event:"buy-button-customer-email",data:{customerEmail:this.customerEmail}}),this.customerSessionClientSecret&&this.messageIframe({event:"buy-button-customer-session-client-secret",data:{customerSessionClientSecret:this.customerSessionClientSecret}})}},{key:"addFrameLoadListener",value:function(){this.frameLoadListener=this.frameLoadListenerFunc.bind(this),b(this.frame,"load",this.frameLoadListener,!1)}},{key:"removeFrameLoadListener",value:function(){v(this.frame,"load",this.frameLoadListener,!1)}},{key:"postMessageListenerFunc",value:function(n){if(x(n.origin)){var a=n.data,s=a.message.payload.data,f=a.message.payload.event,m=s.uuid;if(s!==null&&typeof s=="object"&&m===this.uniqueId)switch(f){case"buy-button-init":this.messageIframe({event:"buy-button-outer-data",data:{embedLocation:_}}),this.messageAttributesToIframe();break;case"buy-button-resize":f==="buy-button-resize"&&typeof s.height=="number"&&s.height&&this.frame.height!==s.height&&(this.frame.style.setProperty("height","".concat(s.height,"px"),"important"),this.messageIframe({event:"buy-button-frame-resize"}))}}}},{key:"addPostMessageListener",value:function(){this.postMessageListener=this.postMessageListenerFunc.bind(this),b(window,"message",this.postMessageListener,!1)}},{key:"removePostMessageListener",value:function(){v(window,"message",this.postMessageListener,!1)}},{key:"attachShadowDom",value:function(){this.attachShadow({mode:"open"}).appendChild(this.frame)}},{key:"reInitializeIframeFunc",value:function(){this.messageIframe({event:"buy-button-outer-data",data:{embedLocation:_}}),this.messageIframe({event:"buy-button-frame-resize"})}},{key:"pageShowListenerFunc",value:function(n){n.persisted&&(b(this.frame,"load",this.reInitializeIframe,!1),this.frame.src=this.frame.src)}},{key:"addPageShowListener",value:function(){this.pageShowListener=this.pageShowListenerFunc.bind(this),this.reInitializeIframe=this.reInitializeIframeFunc.bind(this),b(window,"pageshow",this.pageShowListener)}},{key:"removePageShowListener",value:function(){v(window,"pageshow",this.pageShowListener),v(this.frame,"load",this.reInitializeIframe,!1)}},{key:"createIframeElement",value:function(){var n=document.createElement("iframe");return n.style.setProperty("display","inline-block","important"),n.style.setProperty("margin","0px","important"),n.style.setProperty("padding","0px","important"),n.style.setProperty("userSelect","none","important"),n.style.setProperty("willChange","transform","important"),n.style.setProperty("border","none","important"),n.style.setProperty("margin","0px","important"),n.style.setProperty("width","288px","important"),n.style.setProperty("height","44px","important"),n.style.setProperty("transition","height 0.01s linear","important"),n.style.setProperty("color-scheme","only light","important"),n.setAttribute("scrolling","no"),n}},{key:"messageIframe",value:function(n){var a=F(j);if(!a)throw Error("stripe-buy-button: target origin is null");this.frame.contentWindow&&this.frame.contentWindow.postMessage({type:"outer",message:{payload:n}},a)}},{key:"reloadIframe",value:function(){this.setIframeSrc()}},{key:"attributeChangedCallback",value:function(n,a,s){switch(n){case"client-reference-id":this.messageIframe({event:"buy-button-client-reference-id",data:{clientReferenceId:s}}),this.clientReferenceId=s;break;case"customer-email":this.messageIframe({event:"buy-button-customer-email",data:{customerEmail:s}}),this.customerEmail=s;break;case"customer-session-client-secret":this.messageIframe({event:"buy-button-customer-session-client-secret",data:{customerSessionClientSecret:s}}),this.customerSessionClientSecret=s;break;case"buy-button-id":this.buyButtonId=s,this.reloadIframe();break;case"publishable-key":this.publishableApiKey=s,this.reloadIframe();break;case"__locale-override":this.__localeOverride=s,this.reloadIframe()}}}])&&S(o.prototype,l),c&&S(o,c),Object.defineProperty(o,"prototype",{writable:!1}),t}(L(HTMLElement)),q=T;customElements.get("stripe-buy-button")===void 0&&customElements.define("stripe-buy-button",q)})();
